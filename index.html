<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Forca</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
<!-- TOPO -->
<h1>Jogo da Forca</h1>
<img id="imagem" src="img/1.png" />
<div id="exibicaoPalavra">_ _ _</div>
<input type="text" id="letra" placeholder="Digite uma letra" maxlength="1">
<button id="btn-chutar" onclick="chutarLetra()">Tentar</button>

<!-- BAIXO -->
<h2>Tentativas passadas</h2>
<div id="letras-chutadas"></div>
<div id="mensagem"></div>
<button id="botao-reiniciar" onclick="iniciarJogo()" style="display:none;">Tentar novamente</button>

<script>
const listaPalavra = ["henrique"];
let palavraEscolhida;
let exibicaoPalavra;
let letrasChutadas;
let tentativasRestantes;
let numeroDeErros;

function iniciarJogo() {
    palavraEscolhida = listaPalavra[0].toUpperCase();
    exibicaoPalavra = Array(palavraEscolhida.length).fill('_');

    letrasChutadas = [];
    tentativasRestantes = 7;
    numeroDeErros = 1;

    document.getElementById("letra").disabled = false;
    document.getElementById("mensagem").innerText = "";
    document.getElementById("botao-reiniciar").style.display = "none";

    atualizarExibicao();
}

function atualizarExibicao() {
    document.getElementById("exibicaoPalavra").innerText = exibicaoPalavra.join(' ');
    document.getElementById("letras-chutadas").innerText = letrasChutadas.join(', ');
    document.getElementById("imagem").src = `img/${numeroDeErros}.png`;

    if (tentativasRestantes === 0) {
        encerrarJogo("Você perdeu!!");
    } else if (!exibicaoPalavra.includes('_')) {
        encerrarJogo("Parabéns! Você passou de fase.");
    }
}

function chutarLetra() {
    const entradaLetra = document.getElementById('letra');
    const letra = entradaLetra.value.toUpperCase().trim();

    if (!letra.match(/^[A-ZÀ-ÚÇ]$/)) {
        alert("Digite uma letra válida.");
        return;
    }

    if (letrasChutadas.includes(letra)) {
        alert("Você já tentou esta letra, digite outra.");
        return;
    }

    letrasChutadas.push(letra);

    if (palavraEscolhida.includes(letra)) {
        for (let i = 0; i < palavraEscolhida.length; i++) {
            if (palavraEscolhida[i] === letra) {
                exibicaoPalavra[i] = letra;
            }
        }
    } else {
        tentativasRestantes--;
        numeroDeErros++;
    }

    entradaLetra.value = "";
    atualizarExibicao();
}

function encerrarJogo(mensagem) {
    document.getElementById("letra").disabled = true;
    document.getElementById("mensagem").innerText = mensagem;
    document.getElementById("botao-reiniciar").style.display = "block";
}

window.onload = iniciarJogo;
</script>
</body>
</html>
